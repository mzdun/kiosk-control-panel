# Copyright (c) 2013 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

# GNU Makefile based on shared rules provided by the Native Client SDK.
# See README.Makefiles for more details.

VALID_TOOLCHAINS := pnacl glibc clang-newlib linux
NACL_SDK_ROOT ?= $(abspath $(CURDIR)/../..)

TARGET = ppapi_cpp

include $(NACL_SDK_ROOT)/tools/common.mk

LIBS = $(DEPS)

CFLAGS = -Wall
SOURCES = array_output.cc \
  audio.cc \
  audio_buffer.cc \
  audio_config.cc \
  audio_encoder.cc \
  compositor.cc \
  compositor_layer.cc \
  core.cc \
  cursor_control_dev.cc \
  directory_entry.cc \
  file_chooser_dev.cc \
  file_io.cc \
  file_ref.cc \
  file_system.cc \
  fullscreen.cc \
  graphics_2d.cc \
  graphics_3d.cc \
  graphics_3d_client.cc \
  host_resolver.cc \
  image_data.cc \
  input_event.cc \
  instance.cc \
  instance_handle.cc \
  lock.cc \
  media_stream_audio_track.cc \
  media_stream_video_track.cc \
  memory_dev.cc \
  message_loop.cc \
  module.cc \
  mouse_cursor.cc \
  mouse_lock.cc \
  net_address.cc \
  network_list.cc \
  network_monitor.cc \
  network_proxy.cc \
  paint_aggregator.cc \
  paint_manager.cc \
  ppp_entrypoints.cc \
  printing_dev.cc \
  rect.cc \
  resource.cc \
  scriptable_object_deprecated.cc \
  simple_thread.cc \
  tcp_socket.cc \
  text_input_controller.cc \
  truetype_font_dev.cc \
  udp_socket.cc \
  url_loader.cc \
  url_request_info.cc \
  url_response_info.cc \
  var.cc \
  var_array.cc \
  var_array_buffer.cc \
  var_dictionary.cc \
  video_decoder.cc \
  video_encoder.cc \
  video_frame.cc \
  view.cc \
  view_dev.cc \
  websocket.cc \
  websocket_api.cc


all: install

# Build rules generated by macros from common.mk:

$(foreach src,$(SOURCES),$(eval $(call COMPILE_RULE,$(src),$(CFLAGS))))
$(eval $(call LIB_RULE,ppapi_cpp,$(SOURCES)))
ifneq (,$(findstring $(TOOLCHAIN),glibc))
$(eval $(call SO_RULE,ppapi_cpp,$(SOURCES),$(LIBS),$(DEPS)))
endif

